
<!-- Table 'blynk_devices' edit -->
<form action="?" method="post" enctype="multipart/form-data" name="frmEdit" class="form-horizontal">
[#if OK#]
<div class="alert alert-success"><#LANG_DATA_SAVED#></div>
[#endif OK#]
[#if ERR#]
<div class="alert alert-error"><#LANG_FILLOUT_REQURED#></div>
[#endif ERR#]
<fieldset>
[#if ID=""#]
<legend><#LANG_NEW_RECORD#></legend>
[#endif ID#]
<div class="form-group">
<div>
<table class="table table-stripped">
 <tr>
  <td><#LANG_TITLE#></td>
  <td>PIN</td>
  <td><#LANG_VALUE#></td>
  <td><#LANG_SECTION_SETTINGS#></td>
  <td><#LANG_DEVICE#></td>
  <td><#LANG_LINKED_OBJECT#></td>
  <td><#LANG_LINKED_PROPERTY#></td>
  <td>&nbsp;</td>
 </tr>
 [#begin PROPERTIES#]
 <tr>
  <td valign="top"><input type="hidden" name="title[#ID#]" id="title[#ID#]" value="[#TITLE#]">[#TITLE#]</td>
  <td valign="top">[#PIN#]<br>[#PIN_TYPE#]</td>
  <td valign="top"><input type="hidden" name="value[#ID#]" id="value[#ID#]" value="[#VALUE#]">[#VALUE#]</td>
  <td valign="top"><!--input type="text" name="dest[#ID#]" id="dest[#ID#]" value="[#DEST#]"-->
	<select class="form-control" name="dest[#ID#]">
		<option value="" [#if DEST=="" #] selected[#endif#]>Нет</option>
		<option value="R0" [#if DEST=="R0" #] selected[#endif#]>Округлить (целое)</option>
		<option value="R1" [#if DEST=="R1" #] selected[#endif#]>Округлить (1 знак)</option>
		<option value="INV" [#if DEST=="INV" #] selected[#endif#]>Инвертировать</option>
		<option value="RGB" [#if DEST=="RGB" #] selected[#endif#]>RGB виджет</option>
	</select>  
  </td></td>
  <td valign="top">
  [#if SDEVICE_TYPE!=""#]
	[#module name="devices" action="link" title="<#TITLE#>_<#PROPERTIES.TITLE#>" type="<#PROPERTIES.SDEVICE_TYPE#>" source_table="blynk_data" source_table_id="<#PROPERTIES.ID#>" linked_object="<#PROPERTIES.LINKED_OBJECT#>"#]
  [#else#]
	&nbsp;
  [#endif#]</td>
  <td valign="top"><input type="text" name="linked_object[#ID#]" id="linked_object[#ID#]" value="[#LINKED_OBJECT#]"></td>
  <td valign="top"><input type="text" name="linked_property[#ID#]" id="linked_property[#ID#]" value="[#LINKED_PROPERTY#]"></td>
   <td valign="top"><a href="?id=<#ID#>&view_mode=<#VIEW_MODE#>&tab=<#TAB#>&delete_id=[#ID#]" onClick="return confirm('<#LANG_ARE_YOU_SURE#>');" class="btn btn-default"><i class="glyphicon glyphicon-remove"></i></a></td>
  [#module name="linkedobject" object_field="linked_object<#PROPERTIES.ID#>" property_field="linked_property<#PROPERTIES.ID#>" method_field="linked_method<#PROPERTIES.ID#>" width="200"#]
 </tr>
 [#end PROPERTIES#]
</table> 
</div>
</div>
[#module name="linkedobject" object_field="linked_object" property_field="linked_property" method_field="linked_method"#]
<div class="form-group">
        <div class="col-lg-offset-3 col-lg-4">
 [#if ID!=""#]
 <button type="submit" name="subm" value="Submit" class="btn btn-primary"><#LANG_SUBMIT#></button>
 [#else ID#]
 <button type="submit" name="subm" value="Add" class="btn btn-primary"><#LANG_ADD#></button>
 [#endif ID#]
 <a href="?data_source=<#DATA_SOURCE#>" class="btn btn-default "><#LANG_CANCEL#></a>
<input type="hidden"type="hidden" name="id" value="<#ID#>">
<input type="hidden" name="view_mode" value="<#VIEW_MODE#>">
<input type="hidden" name="edit_mode" value="<#EDIT_MODE#>">
<input type="hidden" name="mode" value="update">
<input type="hidden" name="data_source" value="<#DATA_SOURCE#>">
<input type="hidden" name="tab" value="<#TAB#>">
        </div>
</div>
</fieldset>
</form>
